
// see: https://www.baeldung.com/spring-boot-gradle-plugin
plugins {
    id 'io.franzbecker.gradle-lombok' version '1.10'
    id "java"
    id "eclipse"
    id "idea"
    id 'org.springframework.boot' version '2.0.4.RELEASE'
}

apply plugin: 'io.spring.dependency-management'

repositories {
    mavenLocal()
    mavenCentral()
}

// make sure the frontend is compiled and in mavenLocal
compileJava.dependsOn(':frontend:publishWebJarPublicationToMavenLocal')

dependencies {
    compile('net.wohlfart.apollo:frontend:0.0.1-SNAPSHOT')        // the frontend webjar

    compile 'org.springframework.boot:spring-boot-starter-web'
    compile 'com.h2database:h2'
}

springBoot {
    mainClassName = 'net.wohlfart.Application'
}

task MrProper {
    dependsOn clean // removed build/
    doLast {
        delete "${projectDir}/out"  // from idea
        delete "${projectDir}/.gradle"
    }
}